
<div>

  <div class="container-top">
      <h1>🚴‍♂️🚴‍♂️🚴‍♂️ Votre vélo est en mode réparation 🚴‍♂️🚴‍♂️🚴‍♂️</h1>

  </div>

  <div class="container-global">

      <div class="container-infos">
          <div class="">
            <h1>Show bike id : <%= @bike.id %></h1>
            <h2> name : <%= @bike.name  %></h2>
            <p> current_user : <%= current_user.first_name %><%= current_user.last_name %></p>
          </div>

          <div class="">
            <span> Model : <%= @bike.model %></span>
            <br>
            <span> Brand : <%= @bike.brand %></span>
          </div>
          <br>
          <h5>La Mécanique du jour : </h5>
            <%= render "chain-card", bike: @bike unless Chain.where(bike: @bike).empty? %>
          <br>
          <h5>Historique de la Mécanique de votre vélo : </h5>
          <div class="d-flex flex-wrap">
            <% sum = 1 %>
            <% Chain.where(bike: @bike).all.each do |c| %>
              <div class="prob-infos">
                <h3>Prob n° <%= sum %></h3>
                <% sum += 1 %>
                <p><%= c.created_at.to_date %></p>
                <button><%= link_to "Edit",  edit_bike_chain_path(c) %></button>
              </div>
            <% end %>
          </div>
      </div>

      <% if (!Chain.where(bike: @bike).exists?) || (Chain.where(bike: @bike).last.created_at.to_date != Date.today) %>
        <%= render "modal-probs", bike: @bike %>
      <% else %>
        <%= render "modal-error-day", bike: @bike %>
      <% end %>
  </div>

</div>
